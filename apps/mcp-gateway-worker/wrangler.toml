name = "mcp-gateway-worker"
type = "service"
main = "dist/index.js"
compatibility_date = "2024-12-01"

[env.development]
name = "mcp-gateway-worker-dev"
routes = [
  { pattern = "localhost:8000/*", zone_name = "local" }
]

[env.production]
name = "mcp-gateway-worker"
routes = []

[[env.production.services]]
binding = "DOMAIN_A_SERVICE"
service = "domain-a-tools-worker"

[[env.production.services]]
binding = "DOMAIN_B_SERVICE"
service = "domain-b-tools-worker"

[env.production.vars]
ENVIRONMENT = "production"
DOMAIN_A_URL = "https://domain-a-tools-worker.to-jamz.workers.dev"
DOMAIN_B_URL = "https://domain-b-tools-worker.to-jamz.workers.dev"
DOMAIN_SHARED_SECRET = "prod-secret-123"
ALLOWED_ORIGINS = "*"

[build]
command = "npm run build"
cwd = "."

[vars]
ENVIRONMENT = "development"
DOMAIN_A_URL = "http://localhost:8001"
DOMAIN_B_URL = "http://localhost:8002"
ALLOWED_ORIGINS = "localhost:8000,localhost:8501,http://localhost:3000"

[[env.development.services]]
binding = "DOMAIN_A_SERVICE"
service = "domain-a-tools-worker-dev"

[[env.development.services]]
binding = "DOMAIN_B_SERVICE"
service = "domain-b-tools-worker-dev"

